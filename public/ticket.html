<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <title>Deutschlandticket</title>
    <style>
        body {
            margin: 0;
            font-family: Arial, sans-serif;
            background: #164094; /* исправленный фон */
            display: flex;
            justify-content: center;
            padding: 20px 0;
        }
        .main-container {
            padding-left: 1rem;
            padding-right: 1rem;
            width: 100%;
            max-width: 480px;
            margin: auto;
            box-sizing: border-box;
        }
        .ticket-container {
            background: #fff;
            padding: 1px;
            border-radius: 16px;
            max-width: 100%;
            overflow: hidden;
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
        }
        .ticket-header {
        background: linear-gradient(112.91deg,#ffffff82 3.51%,#fff0 111.71%) , #164094;
            font-family: -apple-system, BlinkMacSystemFont, Segoe UI, Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", Segoe UI Symbol, sans-serif;;
            color: #fff;
            text-align: center;
            padding: 1.5rem;
            font-weight: bold;
            font-size: 20px;
        }
        .ticket-logos {
            display: flex;
            justify-content: center;
            align-items: center;
            padding-top: 20px;
            margin-bottom: 12px;
        }
        .ticket-logos img {
            height: 24px;
            width: 37px;
        }
        .ticket-qr {
            display: flex;
            justify-content: center;
            padding: 20px;
            border-bottom: 1px solid #ddd;
        }
        .ticket-qr img {
            width: 398px;
            height: 398px;
        }
        .ticket-slider {
            height: 6px;
            background: #e0e0e0;
            margin: 10px 40px;
            border-radius: 3px;
            position: relative;
            overflow: hidden;
        }
        .ticket-slider::after {
            content: "";
            position: absolute;
            top: 0;
            left: -40%;
            width: 40%;
            height: 100%;
            background: #2196f3;
            animation: slide 2s infinite;
        }
        @keyframes slide {
            0% { left: -40%; }
            50% { left: 100%; }
            100% { left: -40%; }
        }
        .ticket-number {
            text-align: center;
            font-size: 1.25rem;
            line-height: 1.75rem;
            padding: 10px 0;
            border: 1px solid #ddd;
            border-radius: .5rem;
            margin: 1.5rem;
        }
        .main-info {
            background-color: #f9fafb;
            border-top: 1px solid #ddd;
        }
        .ticket-details {
            margin-top: 24px;
            font-size: 14px;
        }
        .ticket-details2 {
            font-size: 14px;
        }
        .ticket-details div,
        .ticket-details2 div {
            padding: 8px 24px;
            display: flex;
            justify-content: space-between;
            align-items: center; /* ← ключ */
        }
        .ticket-details svg,
        .ticket-details2 svg {
            width: 18px;
            height: 18px;
            margin-right: 8px;
            flex-shrink: 0;
            fill: #667085;
        }
        .label {
            display: flex;
            align-items: center;  /* ← иконка и текст по центру */
            gap: 8px;             /* расстояние между иконкой и текстом */
            color: #667085;
            font-weight: 400;
        }
        .label svg {
            width: 18px;          /* фиксированный размер иконки */
            height: 18px;
            flex-shrink: 0;       /* не сжимать */
            display: block;       /* убрать «прыжки» по baseline */
        }
        .label .icon {
            width: 20px;   /* фиксированная ширина под иконку */
            height: 20px;
            margin-right: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .info {
            color: rgb(16, 24, 40);
            font-weight: 600;
        }
        .border-bottom {
            margin: 24px 0;
            border-bottom: 1px solid #ddd;
        }
        .border-bottom_double {
            margin: 0;
            border-bottom: 1px solid #ddd;
        }
        .small-text {
            margin-top: 24px;
            font-size: 12px;
            color: #667085;
            padding: 0 24px 24px 24px;
            max-width: 398px;
            text-align: left;
        }
             /* Мобильная адаптация на весь экран */
        @media (max-width: 480px) {
            html, body {
                margin: 0;
                padding: 0;
                width: 100%;
                height: 100%;
                overflow-x: hidden;
                -webkit-text-size-adjust: 100%;
            }

            .main-container {
                width: 100%;
                max-width: 100%;
                min-height: 100vh; /* контейнер занимает всю высоту экрана */
                padding: 0;
                display: flex;
                flex-direction: column;
                align-items: center;
                justify-content: flex-start;
                box-sizing: border-box;
            }

            .ticket-container {
                width: 100%;
                border-radius: 0; /* билет на весь экран */
                box-shadow: none;
                display: flex;
                flex-direction: column;
            }

            .ticket-header {
                font-size: 20px;
                padding: 1.5rem;
                text-align: center;
            }

            .ticket-logos {
                padding: 16px 0;
            }

            .ticket-logos img {
                max-width: 25%; /* логотипы меньше на мобильном */
                height: auto;
            }

            .ticket-qr {
                padding: 0;
                margin: 0;
                width: 100%;
                display: flex;
                justify-content: center;
            }

            .ticket-qr img {
                width: 100%; /* QR-код растягивается под ширину экрана */
                height: auto; /* сохраняем пропорции */
            }

            .ticket-number {
                font-size: 1rem;
                padding: 8px 0;
                margin: 1rem 0;
            }

            .ticket-slider {
                margin: 10px 5%;
            }

            .ticket-details div,
            .ticket-details2 div {
                flex-direction: column; /* текст под иконкой вертикально */
                align-items: flex-start;
                padding: 6px 16px;
            }

            .small-text {
                padding: 0 16px 16px 16px;
                font-size: 12px;
                text-align: left;
            }

            /* Плавная вертикальная прокрутка */
            body, .main-container {
                overflow-y: auto;
                -webkit-overflow-scrolling: touch;
            }
        }
    </style>
</head>
<body>
<div class="main-container">
    <div class="ticket-container">
        <div class="ticket-header">Deutschlandticket</div>
        <div class="ticket-logos">
            <img src="https://ride-production-public-data.obs.eu-de.otc.t-systems.com/partner/Lzbyh1qZ0ZWCLkV5mudl_pader/Logo_E-Ticket.svg" alt="Logo">
        </div>

        <!-- QR-код -->
        <div class="ticket-qr">
            <img src="qr.png" alt="QR Code">
        </div>




        <!-- Номер билета -->
        <div class="ticket-number">1058828</div>
        <!-- Бегунок -->
        <div class="ticket-slider"></div>
        <div class="main-info">
            <div class="ticket-details">
                <div>
            <span class="label">
              <!-- часы -->
              <svg width="100%" height="100%" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg" fit="" preserveAspectRatio="xMidYMid meet" focusable="false">
  <path fill-rule="evenodd" clip-rule="evenodd" d="M10 18C14.4183 18 18 14.4183 18 10C18 5.58172 14.4183 2 10 2C5.58172 2 2 5.58172 2 10C2 14.4183 5.58172 18 10 18ZM11 6C11 5.44772 10.5523 5 10 5C9.44772 5 9 5.44772 9 6V10C9 10.2652 9.10536 10.5196 9.29289 10.7071L12.1213 13.5355C12.5118 13.9261 13.145 13.9261 13.5355 13.5355C13.9261 13.145 13.9261 12.5118 13.5355 12.1213L11 9.58579V6Z"></path>
</svg>
              Gültig von:
            </span>
                    <span class="info">01.10.2025 - 00:00</span>
                </div>
                <div>
                    <span class="label"><span class="icon"></span> <!-- пустое место под иконку -->Gültig bis:</span>
                    <span class="info">01.11.2025 - 03:00</span>
                </div>
                <div>
                    <span class="label"><span class="icon"></span> <!-- пустое место под иконку -->Ausgestellt:</span>
                    <span class="info">22.09.2025, 22:54 Uhr</span>
                </div>
                <div>
                    <span class="label"><span class="icon"></span> <!-- пустое место под иконку -->Geltungsbereich:</span>
                    <span class="info">Deutschlandweit</span>
                </div>
                <div>
                    <span class="label"><span class="icon"></span> <!-- пустое место под иконку -->Klasse:</span>
                    <span class="info">2. Klasse</span>
                </div>
                <div>
            <span class="label">
              <!-- билет -->
              <svg width="100%" height="100%" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg" fit="" preserveAspectRatio="xMidYMid meet" focusable="false">
  <path d="M14 5.5C14 7.36384 12.7252 8.92994 11 9.37398V13C11 13.5523 10.5523 14 10 14C9.44771 14 9 13.5523 9 13V9.37398C7.27477 8.92994 6 7.36384 6 5.5C6 3.29086 7.79086 1.5 10 1.5C12.2091 1.5 14 3.29086 14 5.5Z"></path>
  <path d="M1.5 14.5C1.5 12.7003 4.02566 11.1782 7.5 10.6758V13C7.5 14.3807 8.61929 15.5 10 15.5C11.3807 15.5 12.5 14.3807 12.5 13V10.6758C15.9743 11.1782 18.5 12.7003 18.5 14.5C18.5 16.7091 14.6944 18.5 10 18.5C5.30558 18.5 1.5 16.7091 1.5 14.5Z"></path>
</svg>
              Preisstufe:
            </span>
                    <span class="info">deutschlandweit</span>
                </div>
            </div>

            <div class="border-bottom"></div>

            <div class="ticket-details2">
                <div>
            <span class="label">
              <!-- человек -->
              <svg width="100%" height="100%" viewBox="0 0 14 16" xmlns="http://www.w3.org/2000/svg" fit="" preserveAspectRatio="xMidYMid meet" focusable="false">
<path d="M7 7C8.933 7 10.5 5.433 10.5 3.5C10.5 1.567 8.933 0 7 0C5.067 0 3.5 1.567 3.5 3.5C3.5 5.433 5.067 7 7 7Z"></path>
<path d="M5.15 8.62627C4.25072 8.26964 3.20665 8.03441 2.42 8.5975C0.933754 9.66135 0 11.2012 0 13.3333C0 14.8061 1.19724 16 2.67 16H11.34C12.8128 16 14 14.8061 14 13.3333C14 11.2012 13.0662 9.66134 11.58 8.59749C10.7934 8.03441 9.75928 8.26964 8.86 8.62627C8.25186 8.86744 7.6951 9 7.0011 9C6.3071 9 5.75814 8.86744 5.15 8.62627Z"></path>
</svg>
              Ticketinhaber*in:
            </span>
                    <span class="info">Dima Neonov</span>
                </div>
                <div>
            <span class="label">
              <!-- календарь -->
               <svg width="100%" height="100%" viewBox="0 0 16 17" xmlns="http://www.w3.org/2000/svg" fit="" preserveAspectRatio="xMidYMid meet" focusable="false">
<path fill-rule="evenodd" clip-rule="evenodd" d="M3 1C3 0.447715 3.44772 0 4 0C4.55228 0 5 0.447715 5 1H11C11 0.447715 11.4477 0 12 0C12.5523 0 13 0.447715 13 1C14.6569 1 16 2.34315 16 4V14C16 15.6569 14.6569 17 13 17H3C1.34315 17 0 15.6569 0 14V4C0 2.34315 1.34315 1 3 1ZM3 3C2.44772 3 2 3.44772 2 4V6H14V4C14 3.44772 13.5523 3 13 3H3ZM9.00002 9C9.00002 8.7234 8.84778 8.46926 8.60391 8.33875C8.36004 8.20823 8.06414 8.22254 7.83399 8.37596L6.33399 9.37596C5.98935 9.60573 5.89622 10.0714 6.12598 10.416C6.35575 10.7607 6.8214 10.8538 7.16604 10.624L7.50002 10.4014V14C7.50002 14.4142 7.8358 14.75 8.25002 14.75C8.66423 14.75 9.00002 14.4142 9.00002 14V9Z"></path>
</svg>
              Geburtsdatum:
            </span>
                    <span class="info">12.11.1992</span>
                </div>
                <div class="border-bottom_double"></div>
            </div>

            <div class="small-text">
                Deutschlandweit gültig in allen Nahverkehrsmitteln (ÖPNV/SPNV)<br>2. Klasse
            </div>
        </div>
    </div>
</div>
</body>
</html>

<script>
    // Получаем ключ билета из URL
    const params = new URLSearchParams(location.search);
    const key = params.get('key');

    if(!key){
        alert('Билет не найден!');
    }

    // Элементы
    const qrcodeEl = document.getElementById('qrcode');
    const fullnameEl = document.getElementById('fullname');
    const birthdateEl = document.getElementById('birthdate');
    const departureDateEl = document.getElementById('departureDate');
    const departureTimeEl = document.getElementById('departureTime');
    const arrivalDateEl = document.getElementById('arrivalDate');
    const arrivalTimeEl = document.getElementById('arrivalTime');
    const placeEl = document.getElementById('place');
    const classEl = document.getElementById('class');
    const ticketNumberEl = document.getElementById('ticketNumber');

    // Прогресс-бегунок
    const ball = document.getElementById('progressBall');
    const bar = ball.parentElement;
    let pos = 0, speed = 2, direction = 1;
    function animate() {
        const maxPos = bar.clientWidth - ball.clientWidth;
        pos += speed * direction;
        if(pos >= maxPos){ pos = maxPos; direction = -1; }
        else if(pos <= 0){ pos = 0; direction = 1; }
        ball.style.left = pos + 'px';
        requestAnimationFrame(animate);
    }
    animate();

    // Загружаем данные с сервера
    fetch(`/api/tickets/${key}`)
        .then(res => {
            if(!res.ok) throw new Error('Ticket not found');
            return res.json();
        })
        .then(ticket => {
            qrcodeEl.src = ticket.qrcode || '';
            fullnameEl.textContent = ticket.fullname || '-';
            birthdateEl.textContent = ticket.birthdate || '-';

            const [depDate, depTime] = (ticket.departure || '- - -').split(' - ');
            const [arrDate, arrTime] = (ticket.arrival || '- - -').split(' - ');

            departureDateEl.textContent = depDate;
            departureTimeEl.textContent = depTime;
            arrivalDateEl.textContent = arrDate;
            arrivalTimeEl.textContent = arrTime;

            placeEl.textContent = ticket.place || '-';
            classEl.textContent = ticket.class || '-';
            ticketNumberEl.textContent = ticket.ticketNumber ? `Билет № ${ticket.ticketNumber}` : '';
        })
        .catch(err => {
            alert('Билет не найден на сервере!');
            console.error(err);
        });
</script>

</body>
</html>
